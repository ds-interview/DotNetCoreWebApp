@{
    ViewBag.Title = "Job List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<!--Delete modal-->
<div class="modal fade" id="divconfirmdelete" tabindex="-1" role="dialog" aria-labelledby="exampleModalTooltip" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalheading">Delete Confirmation</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>


            <div class="modal-body">
                <p>Are you sure you want to delete this Job?</p>
            </div>

            <div class="modal-footer">

                <button type="button" class="btn btn-secondary modalclose" data-dismiss="modal">Cancel</button>
                <button type="button" id="btnContinueDelete" onclick="javascript: dodelete()" class="btn btn-danger">Delete</button>
                <div id="lblstatus" class="spinner-border text-primary d-none" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="content-page">
    <div class="content">
        <div class="container-fluid">
            @if (@TempData["error"] != null)
            {
                <div class="row">
                    <div class="col-12">
                        <div id="divwarning" class="bg-warning p-1 mb-2 rounded">
                            <span class="text-black"><i class="mdi mdi-alert mr-2 ml-2"></i><label class="col-form-label-lg" id="lblmsg">@TempData["error"]</label></span>
                        </div>
                    </div>
                </div>
            }
            @if (@TempData["success"] != null)
            {
                <div class="row">
                    <div class="col-12">
                        <div id="divsuccess" class="bg-success p-1 mb-2 rounded">
                            <span class="text-white"><i class="mdi mdi-check-bold mr-2 ml-2"></i><label class="col-form-label-lg" id="lblmsg">@TempData["success"]</label></span>
                        </div>

                    </div>
                </div>
            }
            <div class="col-12">
                <div class="page-title-box">
                    <div class="page-title-right" style="display: block"> <a href="/Home/Job" class="btn btn-dark"><span class="uil uil-plus"></span> Add New Job</a> </div>
                    <h4 class="page-title">Jobs</h4>
                </div>
            </div>
            <hr />
            <div class="row">
                <div class="col-xl-12 col-lg-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="">
                                <table id="tablesite" class="table table-striped dt-responsive">
                                    <thead>
                                        <tr>
                                            <th>Job Code</th>
                                            <th>Job Title</th>
                                            <th>Qualification</th>
                                            <th>Description</th>
                                            <th>Last Date</th>
                                            <th class="text-center">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var item in @ViewBag.Jobs)
                                        {
                                            <tr>
                                                <td>@item.JobCode</td>
                                                <td>@item.JobTitle</td>
                                                <td>@item.MinQualification</td>
                                                <td>@item.Description</td>
                                                <td>@item.ApplyLastDate</td>
                                                <td>
                                                    @*<a asp-action="JobApplication" asp-controller="Home" asp-route-id=@item.Id title="Edit" ><i class='uil uil-edit-alt text-primary mr-2'></i></a>*@
                                                    <a href="/Home/Job?id=@item.Id" title="Edit"><i class='uil uil-edit-alt text-primary mr-2'></i></a>
                                                    <a id="deleteItem" class="deleteItem" data-target="#divconfirm" title="Delete" data-toggle="modal" data-path="@Url.Action("Delete", "Home", new { id = @item.Id })"><i class='uil uil-multiply text-danger'></i></a>
                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                                <label id="lblmsg" class="text-danger"></label>
                            </div>
                            <div id="divwait" class="spinner-border pmd-spinner text-primary page-title-right mt-2 mb-2 d-none" role="status">
                                <span class="sr-only mt-5">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@section scripts{

    <script type="text/javascript">
        var path_to_add = "";
        var id = _geturlkey('id');
        $(document).ready(function () {
            var path_to_delete;

            $(".deleteItem").click(function (e) {
                $("#divconfirmdelete").modal("show");
                path_to_delete = $(this).data('path');
            });
            $('#btnContinueDelete').click(function () {
                window.location = path_to_delete;
                $("#divconfirmdelete").modal("hide");
            });
            $(".modalclose").click(function (e) {
                $("#divconfirmdelete").modal("hide");
            });

        });
    </script>

}